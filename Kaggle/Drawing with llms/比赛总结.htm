<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=ProgId content=OneNote.File>
<meta name=Generator content="Microsoft OneNote 15">
<link id=Main-File rel=Main-File href=比赛总结.htm>
<link rel=File-List href="比赛总结.files/filelist.xml">
</head>

<body lang=zh-CN style='font-family:微软雅黑;font-size:36.0pt'>

<div style='direction:ltr;border-width:100%'>

<div style='direction:ltr;margin-top:0in;margin-left:0in;width:35.3027in'>

<div style='direction:ltr;margin-top:0in;margin-left:0in;width:1.6458in'>

<p style='margin:0in;font-family:微软雅黑;font-size:20.0pt'>比赛总结</p>

</div>

<div style='direction:ltr;margin-top:.0423in;margin-left:0in;width:1.6687in'>

<p style='margin:0in;font-size:10.0pt;color:#767676'><span style='font-family:
Calibri'>2025</span><span style='font-family:微软雅黑'>年</span><span
style='font-family:Calibri'>5</span><span style='font-family:微软雅黑'>月</span><span
style='font-family:Calibri'>28</span><span style='font-family:微软雅黑'>日</span></p>

<p style='margin:0in;font-family:Calibri;font-size:10.0pt;color:#767676'>10:33</p>

</div>

<div style='direction:ltr;margin-top:.4777in;margin-left:0in;width:35.3027in'>

<p style='margin:0in;font-family:微软雅黑;font-size:48.0pt'><span style='font-weight:
bold'># Draw with llms</span></p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:微软雅黑;font-size:48.0pt'><span style='font-weight:
bold'>## Pipeline</span></p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:3.0in'><img src="比赛总结.files/image001.png"
width=2186 height=1158></p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'><span style='font-weight:
bold'>### SD的选择</span></p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>sd2.0</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>sdxl-turbo</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>sdxl-lightning</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>enable_cpu_offload()之后，sd不占用gpu显存了？占用的是cuda:0的显存，最初是加载到cuda:1的，运行时变成加载到cuda:0上了</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>sdxl-lcmlora</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-size:36.0pt'><span
style='font-family:微软雅黑'>flux.1-schnell</span><span style='font-family:"Segoe UI Emoji"'>✅</span></p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'><span style='font-weight:
bold'>### SD prompt的选择</span></p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>prompt_prefix</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>prompt_suffix</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>```</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>prompt
= &quot;Simple, minimalist drawing of gray wool coat with a faux fur collar
with mosaic style, vector graphics, SVG-like, solid colors only&quot;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>```</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-size:36.0pt'><span
style='font-family:微软雅黑'>prompt_prefix = &quot;Extremely simple, ~~Close-up,~~
SVG-style image of&quot;<span style='mso-spacerun:yes'>   </span>加了close-up后，
图片确实近景了，但是看不出来是个什么东西，如裤子上的纽扣，只能看出纽扣，看不出裤子。</span><span style='font-family:"Segoe UI Emoji"'>✅
</span></p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>prompt_suffix
= &quot;with flat color blocks, beautiful, minimal details, solid colors
only&quot;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>prompt
= &quot;Simple drawing of gray wool coat with a faux fur collar&quot;</p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'><span style='font-weight:
bold'>### bitmap转换为Svg代码</span></p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>vtracer非常快</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-size:36.0pt'><span
style='font-family:微软雅黑'>vtracer验证是是否只包含path标签，只包含translate平移操作</span><span
style='font-family:"Segoe UI Emoji"'>✅ </span></p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'><span style='font-weight:
bold'>### ocr圆圈</span></p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-size:36.0pt'><span
style='font-family:微软雅黑'>加入圆圈后超过10000，变为default_svg</span><span
style='font-family:"Segoe UI Emoji"'>✅</span></p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-size:36.0pt'><span
style='font-family:微软雅黑' lang=zh-CN>加入圆圈后不用再做Ocr检测了，节省时间</span><span
style='font-family:"Segoe UI Emoji"' lang=zh-CN>✅</span><span style='font-family:
微软雅黑' lang=zh-CN>。反正进行ocr检测前，也进行random transform，自己检测的也不100%准确 。是的，自己检测的不准确
，因为如果改为本地ocr检测不为1时再加入圆圈，那么LB分数会下降很多，说明本地ocr检测的不准确，很多自己检测ocr分数为1的图片，官方实际的ocr分数不是1。但是赛后来看，还是加入</span><span
style='font-family:微软雅黑' lang=en-US>ocr</span><span style='font-family:微软雅黑'
lang=zh-CN>检测的得分更鲁棒。</span></p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'><span style='font-weight:
bold'>### score_metric</span></p>

<p style='margin:0in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>what
is the point of increasing the number of images if your score metric is bad?</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>仔细分析一下，4个多选问题和static
question的差别。</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>**static
question关注的全局，整体，而generated question关注是局部，是画面中是否明确包含description中的元素。**</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>**debug，把vqa_topic和vqa_element的得分打出来，看一下。**</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>~~static
question更倾向于选细节更多的，也就是svg长度更长的？？~~应该不是这个原因。</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>siglip得分选第二高的和第一高的，PLB的得分都是0.645，说明跟比赛的metric有出入
。</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>siglip
+ ace_score<span style='mso-spacerun:yes'> 
</span>,beta=0.5相当于siglip_weight=0.8</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>siglip权重变小
+ ace_score<span style='mso-spacerun:yes'> 
</span>,beta=0.655相当于siglip_weight=0.7</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>beta=0.57735相当于siglip_weight=0.75
</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>(vqa单个问题+siglip平均)<span
style='mso-spacerun:yes'>   </span>+ ace_score<span style='mso-spacerun:yes'> 
</span>,beta=0.5</p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-size:36.0pt'><span
style='font-family:微软雅黑'>version27 + siglip score PLB 0.621==&gt;0.612，所以siglip
metric不如原来的vqa_evaluator</span><span style='font-family:"Segoe UI Emoji"'>✅</span></p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-size:36.0pt'><span
style='font-family:微软雅黑'>通过构建vqa_regressor数据集，建立ridge模型预测，打印特征重要性，发现topic和siglip_prefix_score对vqa_score的预测最重要。而且与public
LB的得分也一致。最后选择二者的调和平均。</span><span style='font-family:"Segoe UI Emoji"'>✅</span></p>

<p style='margin:0in;margin-left:.375in;font-family:"Segoe UI Emoji";
font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-family:"Segoe UI Emoji";
font-size:36.0pt'>&nbsp;</p>

<p style='margin:0in;margin-left:.375in;font-size:48.0pt'><span
style='font-weight:bold;font-family:"Microsoft YaHei"' lang=zh-CN>一些</span><span
style='font-weight:bold;font-family:微软雅黑' lang=en-US>trick</span><span
style='font-weight:bold;font-family:微软雅黑' lang=zh-CN>：</span></p>

<p style='margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:36.0pt'><span
lang=en-US>1.</span><span lang=zh-CN>将生成的图片（预测的结果）打印出来，d</span><span
lang=en-US>ebug</span><span lang=zh-CN>，才能发现问题，如图片Ocr得分是</span><span
lang=en-US>0</span><span lang=zh-CN>，</span><span lang=en-US>bitmap---&gt;</span><span
lang=zh-CN>svg转换地不清晰等问题。</span></p>

</div>

</div>

</div>

<div>

<p style='margin:0in'>&nbsp;</p>

<p style='text-align:left;margin:0in;font-family:Arial;font-size:9pt;
color:#969696;direction:ltr'>已使用 OneNote 创建。</p>

</div>

</body>

</html>
